---
import Layout from '../layouts/Layout.astro';
import SeccionDia from '../components/SeccionDia.astro';
import SeccionDiaActualIsla from '../components/SeccionDiaActualIsla.tsx';

import diasRaw from '../data/dias.json';
import disenoDiasRaw from '../data/disenoDias.json';

interface Procesion {
  nombre: string;
  descripcion: string;
  cofradia: string;
  parroquia: string;
  horaSalida: string;
  horaLlegada: string;
  imagenCaratula: string;
  imagenExtendida: string;
  posicionImagen: string;
}

interface Dia {
  titulo: string;
  procesiones: Procesion[];
}

interface DisenoDia {
  nombre: string;
  posicionTexto: string;
  colorTexto: string;
}

const dias = diasRaw as Dia[];
const disenoDias = disenoDiasRaw as DisenoDia[];
---
<Layout>
  <SeccionDiaActualIsla client:load 
  dias={dias} 
  disenoDias={disenoDias}
  />

  {dias.map((dia, index) =>
    index >= 0 && dia.procesiones.length > 0 ? (
      <SeccionDia
        titulo={dia.titulo}
        imagenes={dia.procesiones.map((p) => ({
          src: p.imagenCaratula,
          alt: p.nombre,
          descripcion: p.descripcion,
		  rutaId: p.nombre.toLowerCase().replace(/\s+/g, '-')
        }))}
      />
    ) : null
  )}
</Layout>
